# 0202：快乐数（★）


## 题目

编写一个算法来判断一个数 n 是不是快乐数。

「快乐数」定义为：
- 对于一个正整数，每一次将该数替换为它每个位置上的数字的平方和。
- 然后重复这个过程直到这个数变为 1，也可能是 无限循环 但始终变不到 1。
- 如果 可以变为  1，那么这个数就是快乐数。

如果 n 是快乐数就返回 true ；不是，则返回 false 。

示例 1：

    输入：19
    输出：true
    解释：
    12 + 92 = 82
    82 + 22 = 68
    62 + 82 = 100
    12 + 02 + 02 = 1

示例 2：

    输入：n = 2
    输出：false

提示：1 <= n <= 2^31 - 1 

## 分析

直觉上这个过程中数不会越来越大，最终必然进入一个循环，判断是否在 1 上循环即可。

可以用数学知识证明：
- 设 n 是一个 k 位数，第一次替换后得到 n'
- 必然有 n'<=81*k，n'的位数 <= $3+\lfloor log_{10}k \rfloor$。
- 有限步之后 n 的位数必然 <=3


## 解答

```python
def isHappy(self, n: int) -> bool:
    vis = set()
    while n not in vis:
        vis.add(n)
        n = sum(int(x)**2 for x in str(n))
    return n == 1
```
36 ms

## *附加

还可以遍历 [0, 999] 来找出所有循环。最后发现只有两种循环：

	1 → 1
	4 → 16 → 37 → 58 → 89 → 145 → 42 → 20 → 4

故无需哈希表，直接判断是否变成 1 或 4 即可。

```python
def isHappy(self, n: int) -> bool:
    while n not in [1, 4]:
        n = sum(int(x)**2 for x in str(n))
        return n == 1
```
32 ms






